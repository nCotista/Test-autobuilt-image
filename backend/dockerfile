FROM golang:1.24 AS build

WORKDIR /app

# ✅ Copy dependencies
COPY backend/go.mod ./
COPY backend/go.sum ./
RUN go mod download

# ✅ Copy source code
COPY backend/. .

# ✅ Build binary
RUN go build -o main .

# Optional: multi-stage for smaller image
FROM alpine:latest
WORKDIR /root/
COPY --from=build /app/main .
CMD ["./main"]
